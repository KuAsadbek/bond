<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <title>Bilet - {{ event_name }}</title>
    <style type="text/css">
        @page {
            size: 210mm 148mm;
            margin: 0;
        }

        @font-face {
            font-family: 'DejaVuSans';
            src: url('file://{{ font_path }}');
        }

        @font-face {
            font-family: 'DejaVuSans';
            src: url('file://{{ font_bold_path }}');
            font-weight: bold;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            font-family: 'DejaVuSans', 'Helvetica', 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            width: 210mm;
            height: 148mm;
        }

        .ticket {
            width: 210mm;
            height: 148mm;
            background: linear-gradient(180deg, #1e3a5f 0%, #0f1f35 100%);
            position: relative;
        }

        /* Top and bottom gold lines */
        .gold-line-top {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: #ffd700;
        }

        .gold-line-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: #ffd700;
        }

        /* Main table layout */
        .main-table {
            width: 100%;
            height: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        .main-table td {
            height: 100%;
        }

        /* Left Section - Logos */
        .left-section {
            width: 22%;
            background: #152840;
            text-align: center;
            vertical-align: middle;
            padding: 15px;
            border-right: 2px dashed rgba(255, 215, 0, 0.4);
        }

        .logo-img {
            width: 150px;
            height: auto;
        }

        .and-text {
            color: #ffd700;
            font-size: 12pt;
            font-weight: bold;
            margin: 12px 0;
            letter-spacing: 3px;
        }

        .year-badge {
            margin-top: 12px;
            padding: 6px 14px;
            border: 2px solid #ffd700;
            display: inline-block;
        }

        .year-badge span {
            color: #ffd700;
            font-size: 9pt;
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* Center Section - Info */
        .center-section {
            width: 53%;
            padding: 15px 25px;
            vertical-align: middle;
            background: rgba(20, 40, 70, 0.5);
        }

        .ticket-header {
            text-align: center;
            padding-bottom: 12px;
            margin-bottom: 12px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
        }

        .ticket-title {
            font-size: 24pt;
            font-weight: bold;
            color: #ffd700;
            letter-spacing: 2px;
            margin-bottom: 4px;
        }

        .ticket-subtitle {
            font-size: 12pt;
            color: #00bfff;
            letter-spacing: 1px;
        }

        /* Info Table */
        .info-table {
            width: 100%;
            border-collapse: collapse;
        }

        .info-table td {
            padding: 5px 0;
            vertical-align: top;
            height: auto;
        }

        .info-label {
            width: 100px;
            font-size: 10pt;
            color: #7a9fc4;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 13pt;
            color: #ffffff;
            font-weight: 500;
            padding-left: 10px;
        }

        .info-name {
            font-size: 16pt;
            font-weight: bold;
        }

        .subject-badge {
            display: inline-block;
            background: #00bfff;
            color: #ffffff;
            padding: 5px 14px;
            font-size: 11pt;
            font-weight: bold;
        }

        /* Right Section - QR */
        .right-section {
            width: 25%;
            background: #0d1a2d;
            text-align: center;
            vertical-align: middle;
            padding: 15px;
            border-left: 2px dashed rgba(255, 215, 0, 0.4);
        }

        .qr-frame {
            display: inline-block;
            padding: 10px;
            border: 2px solid #ffd700;
        }

        .qr-inner {
            background: #ffffff;
            padding: 8px;
        }

        .qr-img {
            width: 130px;
            height: 130px;
        }

        .scan-text-main {
            margin-top: 12px;
            font-size: 12pt;
            font-weight: bold;
            color: #00bfff;
            letter-spacing: 1px;
        }

        .scan-text-sub {
            font-size: 9pt;
            color: #7a9fc4;
            margin-top: 4px;
        }

        .ticket-id {
            margin-top: 10px;
            font-size: 8pt;
            color: #5a7a94;
            letter-spacing: 0.5px;
        }
    </style>
</head>

<body>
    <div class="ticket">
        <div class="gold-line-top"></div>
        <div class="gold-line-bottom"></div>

        <table class="main-table" cellpadding="0" cellspacing="0">
            <tr>
                <!-- Left Section - Logos -->
                <td class="left-section">
                    {% if logo1_base64 %}
                    <img src="data:image/png;base64,{{ logo1_base64 }}" class="logo-img" alt="Bond"><br>
                    {% endif %}

                    <!-- <div class="year-badge">
                        <span>2026</span>
                    </div> -->
                </td>

                <!-- Center Section - Info -->
                <td class="center-section">
                    <div class="ticket-header">
                        <div class="ticket-title">ISHTIROKCHI BILETI</div>
                        <div class="ticket-subtitle">{{ event_name }}</div>
                    </div>

                    <table class="info-table" cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="info-label">F.I.O</td>
                            <td class="info-value info-name">{{ participant.fullname }}</td>
                        </tr>
                        <tr>
                            <td class="info-label">Maktab</td>
                            <td class="info-value">{{ participant.school }}</td>
                        </tr>
                        <tr>
                            <td class="info-label">Sinf</td>
                            <td class="info-value">{{ participant.grade }}-sinf</td>
                        </tr>
                        <tr>
                            <td class="info-label">Tuman</td>
                            <td class="info-value">{{ participant.district }}</td>
                        </tr>
                        <tr>
                            <td class="info-label">Telefon</td>
                            <td class="info-value">{{ participant.phone_number }}</td>
                        </tr>
                        {% if olympiad %}
                        <tr>
                            <td class="info-label">Sana</td>
                            <td class="info-value" style="color: #ffd700;">{{ olympiad.event_date|date:"d.m.Y" }}</td>
                        </tr>
                        <tr>
                            <td class="info-label">Vaqt</td>
                            <td class="info-value" style="color: #ffd700;">{{ olympiad.event_date|time:"H:i" }}</td>
                        </tr>
                        <tr>
                            <td class="info-label">Manzil</td>
                            <td class="info-value" style="color: #00bfff;">{{ olympiad.location }}</td>
                        </tr>
                        {% endif %}
                        {% if purchased_subjects %}
                        <tr>
                            <td class="info-label">Fan</td>
                            <td class="info-value">
                                {% for subj in purchased_subjects %}
                                <span class="subject-badge" style="margin-right: 4px;">{{ subj.name }}</span>
                                {% endfor %}
                            </td>
                        </tr>
                        {% endif %}
                    </table>
                </td>

                <!-- Right Section - QR -->
                <td class="right-section">
                    <div class="qr-frame">
                        <div class="qr-inner">
                            <img src="data:image/png;base64,{{ qr_code_base64 }}" class="qr-img" alt="QR">
                        </div>
                    </div>

                    <div class="scan-text-main">SKANERLANG</div>
                    <div class="scan-text-sub">Kirish uchun</div>

                    <div class="ticket-id">{{ participant.id|slice:":8"|upper }}</div>
                </td>
            </tr>
        </table>
    </div>
</body>

</html>